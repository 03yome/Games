local Players = game:GetService("Players")
local Rep = game:GetService("ReplicatedStorage")
local lp = Players.LocalPlayer

local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "Chicken Gun R [XMAS]",
    LoadingTitle = "Customization",
    LoadingSubtitle = "Price Control",
    ConfigurationSaving = { Enabled = false }
})

local Tab = Window:CreateTab("Shop", 4483362458)

-- ===== BI·∫æN GI√Å =====
local Price = 50

-- ===== INPUT GI√Å =====
Tab:CreateInput({
    Name = "Price",
    PlaceholderText = "Enter price",
    RemoveTextAfterFocusLost = false,
    Callback = function(text)
        local num = tonumber(text)
        if num then
            Price = num
        end
    end
})

-- ===== BUTTON MUA =====
Tab:CreateButton({
    Name = "Buy Pig Body",
    Callback = function()
        local args = {
            lp.Hidden_leaderstats.ShopPurchases.Body["Pig Body"],
            "Customization",
            Price,
            lp.Hidden_leaderstats.Coins
        }

        Rep.Modules.RemoteFunc_Module.Bought_EventClient:FireServer(unpack(args))
    end
})

Tab:CreateButton({
    Name = "Attack Items",
    Callback = function()
local Players = game:GetService("Players")
local lp = Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

local Rep = game:GetService("ReplicatedStorage")
local Remote = Rep.Blaster.Remotes.MeleeAttackEvent

local BuildingCache = workspace:WaitForChild("BuildingCache")

-- ===== C·∫§U H√åNH AURA =====
local AURA_RANGE = 25
local AURA_DELAY = 0.15
local ENABLED = true

-- ===== MELEE DATA =====
local function fireMelee(target, pos)
    local args = {
        {
            knockbackPower = 30,
            meleeTable = {
                hitboxOffset = Vector3.zero,
                autoHitboxPosition = true,
                melee_RemoteEvent = "MeleeAttackEvent",
                maxHits = 5,
                _debuff_interval = 0,
                damage = 99.9,
                knockbackPower = 30,
                knockback = true,
                _debuff_times = 1,
                hitboxDuration = 0.4,
                _debuff_slowpercentage = 90,
                _debuff_slowduration = 2,
                _allowdebuff = true,
                _debuff_stack = false,
                blaster = lp.Backpack:FindFirstChild("CrescentSword")
                    or char:FindFirstChild("CrescentSword"),
                hitboxSize = Vector3.new(8, 8, 8),
                _debuff_damage = 0,
                followingHitbox = true,
                _debuff_startdelay = 0
            },
            hitCharacter = target,
            hitboxDamage = 99.9,
            hitboxDepth = 8,
            knockback = true,
            hitboxPosition = pos
        }
    }

    Remote:FireServer(unpack(args))
end

-- ===== AURA LOOP =====
task.spawn(function()
    while ENABLED do
        for _, obj in ipairs(BuildingCache:GetChildren()) do
            if obj:IsA("BasePart") or obj:IsA("Model") then
                local pos =
                    obj:IsA("Model") and obj:GetPivot().Position
                    or obj.Position

                if (pos - hrp.Position).Magnitude <= AURA_RANGE then
                    fireMelee(obj, pos)
                end
            end
        end
        task.wait(AURA_DELAY)
    end
end)
    end
})

Tab:CreateButton({
    Name = "Attack players",
    Callback = function()
local Players = game:GetService("Players")
local Rep = game:GetService("ReplicatedStorage")

local lp = Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

local Remote = Rep:WaitForChild("Blaster")
    :WaitForChild("Remotes")
    :WaitForChild("MeleeAttackEvent")

-- ===== CONFIG =====
local AURA_RANGE = 25
local AURA_DELAY = 0.15
local ENABLED = true

-- ƒë·∫£m b·∫£o c√≥ ki·∫øm
local function getSword()
    return lp.Backpack:FindFirstChild("CrescentSword")
        or char:FindFirstChild("CrescentSword")
end

local function fireMeleeOnHumanoid(hum)
    local sword = getSword()
    if not sword then return end

    local pos = hum.RootPart and hum.RootPart.Position or hum.Parent:GetPivot().Position

    local args = {
        {
            knockbackPower = 300,
            meleeTable = {
                hitboxOffset = Vector3.zero,
                autoHitboxPosition = true,
                melee_RemoteEvent = "MeleeAttackEvent",
                maxHits = 1,
                _debuff_interval = 0,
                damage = 9.9,
                knockbackPower = 300,
                knockback = true,
                _debuff_times = 1,
                hitboxDuration = 0.4,
                _debuff_slowpercentage = 90,
                _debuff_slowduration = 2,
                _allowdebuff = true,
                _debuff_stack = false,
                blaster = sword,
                hitboxSize = Vector3.new(8, 8, 8),
                _debuff_damage = 0,
                followingHitbox = true,
                _debuff_startdelay = 0
            },
            hitCharacter = hum,                 -- üëà target l√† Humanoid
            hitboxDamage = 9.9,
            hitboxDepth = 8,
            knockback = true,
            hitboxPosition = pos
        }
    }

    Remote:FireServer(unpack(args))
end

-- ===== AURA LOOP =====
task.spawn(function()
    while ENABLED do
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= lp and plr.Character then
                local hum = plr.Character:FindFirstChild("Humanoid")
                local rpart = plr.Character:FindFirstChild("HumanoidRootPart")
                if hum and rpart then
                    if (rpart.Position - hrp.Position).Magnitude <= AURA_RANGE then
                        fireMeleeOnHumanoid(hum)
                    end
                end
            end
        end
        task.wait(AURA_DELAY)
    end
end)
    end
})

Tab:CreateButton({
    Name = "Attack Npc",
    Callback = function()
local Players = game:GetService("Players")
local lp = Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

local Rep = game:GetService("ReplicatedStorage")
local Remote = Rep.Blaster.Remotes.MeleeAttackEvent

local NPCCache = workspace:WaitForChild("NPCCache")

-- ===== C·∫§U H√åNH AURA =====
local AURA_RANGE = 25
local AURA_DELAY = 0.15
local ENABLED = true

-- ===== MELEE DATA =====
local function fireMelee(target, pos)
    local args = {
        {
            knockbackPower = 30,
            meleeTable = {
                hitboxOffset = Vector3.zero,
                autoHitboxPosition = true,
                melee_RemoteEvent = "MeleeAttackEvent",
                maxHits = 5,
                _debuff_interval = 0,
                damage = 99.9,
                knockbackPower = 30,
                knockback = true,
                _debuff_times = 1,
                hitboxDuration = 0.4,
                _debuff_slowpercentage = 90,
                _debuff_slowduration = 2,
                _allowdebuff = true,
                _debuff_stack = false,
                blaster = lp.Backpack:FindFirstChild("CrescentSword")
                    or char:FindFirstChild("CrescentSword"),
                hitboxSize = Vector3.new(8, 8, 8),
                _debuff_damage = 0,
                followingHitbox = true,
                _debuff_startdelay = 0
            },
            hitCharacter = target,
            hitboxDamage = 99.9,
            hitboxDepth = 8,
            knockback = true,
            hitboxPosition = pos
        }
    }

    Remote:FireServer(unpack(args))
end

-- ===== AURA LOOP =====
task.spawn(function()
    while ENABLED do
        for _, obj in ipairs(NPCCache:GetChildren()) do
            if obj:IsA("BasePart") or obj:IsA("Model") then
                local pos =
                    obj:IsA("Model") and obj:GetPivot().Position
                    or obj.Position

                if (pos - hrp.Position).Magnitude <= AURA_RANGE then
                    fireMelee(obj, pos)
                end
            end
        end
        task.wait(AURA_DELAY)
    end
end)
    end
})
