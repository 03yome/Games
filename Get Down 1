-- üí£ Player List Give Bomb GUI
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- üß± GUI ch√≠nh
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "GiveBombGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 300, 0, 350)
Frame.Position = UDim2.new(0.5, -150, 0.5, -175)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Frame.BackgroundTransparency = 0.1
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Title.Text = "üí£ Give Bomb Executor"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 20
Title.Font = Enum.Font.SourceSansBold
Title.Parent = Frame

-- ‚ùå N√∫t X (ƒë√≥ng GUI)
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -35, 0, 5)
CloseBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.Font = Enum.Font.SourceSansBold
CloseBtn.TextSize = 18
CloseBtn.Parent = Frame

CloseBtn.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

-- üßæ Danh s√°ch cu·ªôn
local ScrollingFrame = Instance.new("ScrollingFrame")
ScrollingFrame.Size = UDim2.new(1, 0, 1, -40)
ScrollingFrame.Position = UDim2.new(0, 0, 0, 40)
ScrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScrollingFrame.ScrollBarThickness = 6
ScrollingFrame.BackgroundTransparency = 1
ScrollingFrame.Parent = Frame

-- üß© H√†m t·∫°o n√∫t cho t·ª´ng player
local function CreatePlayerButton(player)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, -10, 0, 30)
	btn.Position = UDim2.new(0, 5, 0, #ScrollingFrame:GetChildren() * 35)
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	btn.Text = "üí• " .. player.Name
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.TextSize = 18
	btn.Font = Enum.Font.SourceSansBold
	btn.Parent = ScrollingFrame

	btn.MouseButton1Click:Connect(function()
		local ev = ReplicatedStorage:FindFirstChild("GiveBomb")
		if ev then
			pcall(function()
				ev:FireServer(player)
				game.StarterGui:SetCore("SendNotification", {
					Title = "GiveBomb";
					Text = "ƒê√£ g·ª≠i bomb cho " .. player.Name;
					Duration = 3;
				})
			end)
		else
			warn("Kh√¥ng t√¨m th·∫•y s·ª± ki·ªán GiveBomb trong ReplicatedStorage")
		end
	end)
end

-- üß† H√†m c·∫≠p nh·∫≠t danh s√°ch
local function RefreshPlayerList()
	for _, obj in ipairs(ScrollingFrame:GetChildren()) do
		if obj:IsA("TextButton") then obj:Destroy() end
	end

	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer then
			CreatePlayerButton(plr)
		end
	end

	ScrollingFrame.CanvasSize = UDim2.new(0, 0, 0, #Players:GetPlayers() * 35)
end

-- ‚öôÔ∏è C·∫≠p nh·∫≠t khi c√≥ ng∆∞·ªùi v√†o/ra
Players.PlayerAdded:Connect(RefreshPlayerList)
Players.PlayerRemoving:Connect(RefreshPlayerList)

RefreshPlayerList()
